---
import BaseLayout from "../../layouts/BaseLayout.astro";
import PremiumHeader from "../../components/navigation/PremiumHeader.astro";
import type { Language } from "../../lib/i18n";
import { getTranslations } from "../../lib/i18n";
import { ChevronDown, ArrowRight } from "lucide-astro";

export async function getStaticPaths() {
    return [{ params: { lang: "ne" } }, { params: { lang: "en" } }];
}

const { lang } = Astro.params as { lang: Language };
const t = getTranslations(lang);
---

<BaseLayout
    lang={lang}
    title={t.meta.title}
    description={t.meta.description}
    hideHeader={true}
>
    <!-- Hero Section -->
    <section
        class="relative h-screen bg-[url('/images/sakuna-pokhari.jpeg')] bg-cover bg-center bg-fixed"
    >
        <div
            class="absolute inset-0 bg-linear-to-br from-slate-950/85 via-slate-900/75 to-slate-950/85"
        >
        </div>
        <div class="relative z-10 h-full">
            <div
                class="container mx-auto px-8 h-full flex flex-col justify-center"
            >
                <div
                    class="max-w-4xl animate-in fade-in slide-in-from-bottom-12 duration-1000 ease-out"
                >
                    <div class="flex flex-col -gap-[1.3rem] mb-2">
                        <p
                            class="font-serif text-[4rem] md:text-[6rem] font-medium text-white tracking-wide"
                        >
                            {t.home.hero.chaudandigadhi}
                        </p>
                        <p
                            class="-mt-[1rem] font-serif text-[2rem] md:text-[2rem] font-medium text-white tracking-wide"
                        >
                            {t.home.hero.municipality}
                        </p>
                    </div>

                    <div
                        class="font-serif text-lg md:text-xl font-extralight leading-relaxed text-slate-300 mb-6 md:mb-12 tracking-wider"
                    >
                        <p>{t.home.hero.office}</p>
                        <p>{t.home.hero.location}</p>
                    </div>
                    <a
                        href="#story"
                        class="inline-flex items-center justify-between w-64 md:w-64 bg-white text-slate-950 px-6 md:py-4 py-[0.8rem] text-lg font-semibold uppercase transition-all duration-500 hover:bg-slate-100 hover:translate-x-2 hover:shadow-[20px_20px_60px_rgba(0,0,0,0.5)]"
                    >
                        <span>{t.home.hero.cta}</span>
                        <ArrowRight size={20} />
                    </a>
                </div>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div
            class="absolute bottom-12 left-1/2 -translate-x-1/2 text-white/50 animate-bounce z-10"
        >
            <ChevronDown size={32} />
        </div>
    </section>

    <!-- Story Section -->
    <section
        id="story"
        class="relative min-h-screen bg-[url('/images/yalambar-park.jpeg')] bg-cover bg-center bg-fixed flex items-center overflow-hidden"
    >
        <div
            class="absolute inset-0 bg-linear-to-br from-slate-950/94 via-slate-900/90 to-slate-950/94"
        >
        </div>
        <div class="relative z-10 w-full py-24">
            <div class="container mx-auto px-8">
                <div class="max-w-6xl mx-auto flex flex-col gap-12 md:gap-24">
                    <!-- Residents Stat -->
                    <div class="reveal-item flex flex-col gap-4">
                        <h2
                            class="font-serif text-[clamp(4.5rem,8vw,6rem)] leading-[0.85] font-medium text-white tracking-tighter"
                        >
                            {t.home.story.residents}
                        </h2>
                        <span
                            class="text-slate-500 uppercase text-xl md:text-xl font-medium ml-2 md:ml-4"
                        >
                            {t.home.story.residentsLabel}
                        </span>
                    </div>

                    <!-- Households Stat -->
                    <div class="reveal-item flex flex-col gap-4">
                        <h2
                            class="font-serif text-[clamp(4.5rem,8vw,6rem)] leading-[0.85] font-medium text-white tracking-tighter"
                        >
                            {t.home.story.households}
                        </h2>
                        <span
                            class="text-slate-500 uppercase text-xs md:text-xl font-medium ml-2 md:ml-4"
                        >
                            {t.home.story.householdsLabel}
                        </span>
                    </div>

                    <!-- Wards Stat -->
                    <div class="reveal-item flex flex-col gap-4">
                        <h2
                            class="font-serif text-[clamp(4.5rem,8vw,6rem)] leading-[0.85] font-medium text-white tracking-tighter"
                        >
                            {t.home.story.wards}
                        </h2>
                        <span
                            class="text-slate-500 uppercase text-xs md:text-xl font-medium ml-2 md:ml-4"
                        >
                            {t.home.story.wardsLabel}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        const observerOptions = {
            threshold: 0.1,
            rootMargin: "0px 0px -100px 0px",
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("active");
                }
            });
        }, observerOptions);

        document.querySelectorAll(".reveal-item").forEach((item) => {
            observer.observe(item);
        });
    </script>

    <style>
        .reveal-item {
            opacity: 0;
            transform: translateY(40px);
            transition: all 1.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .reveal-item.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Fixed background support for mobile */
        @media (max-width: 768px) {
            section {
                background-attachment: scroll !important;
            }
        }
    </style>
</BaseLayout>
