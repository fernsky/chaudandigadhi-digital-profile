---
import type { Language } from "../../lib/i18n";

interface Props {
  lang: Language;
  currentPath: string;
}

const { lang, currentPath } = Astro.props;

// Helper to determine the path for a target language
const getLanguagePath = (targetLang: Language) => {
  if (targetLang === lang) return currentPath;

  // Handle root URL case (assumes root is default language 'ne')
  if (currentPath === "/") {
    return `/${targetLang}/`;
  }

  // Handle standard /[lang]/... structure
  if (currentPath.startsWith(`/${lang}`)) {
    return currentPath.replace(`/${lang}`, `/${targetLang}`);
  }

  // Fallback for logic if path doesn't explicitly start with lang (shouldn't happen in this structure)
  return `/${targetLang}${currentPath}`;
};

const nePath = getLanguagePath("ne");
const enPath = getLanguagePath("en");
---

<div class="language-switcher font-serif text-white">
  <a
    href={nePath}
    class={`lang-link ${lang === "ne" ? "active pointer-events-none" : "opacity-70 hover:opacity-100"}`}
    aria-label="Switch to Nepali"
  >
    рдиреЗ
  </a>
  <span class="opacity-40 mx-1">|</span>
  <a
    href={enPath}
    class={`lang-link ${lang === "en" ? "active pointer-events-none" : "opacity-70 hover:opacity-100"}`}
    aria-label="Switch to English"
  >
    En
  </a>
</div>

<style>
  .language-switcher {
    display: flex;
    align-items: center;
  }

  .lang-link {
    font-weight: 500;
    letter-spacing: 0.05em;
    transition: all 0.3s ease;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .active {
    font-weight: 700;
    opacity: 1;
  }
</style>
