---
import type { Language } from "../../../lib/i18n";
import { loadChapterSection } from "../../../lib/i18n/chapter-loader";
import { formatNumber } from "../../../lib/i18n/formatters";
import D3BarChart from "../../charts/D3BarChart.astro";
import D3PieChart from "../../charts/D3PieChart.astro";

interface Props {
    lang: Language;
}

const { lang } = Astro.props;

type HousingStructureContent = {
    title: string;
    sectionId: string;
    number: string;
    intro: string;
    subsections: {
        ownershipDetails: {
            title: string;
            subtitle: string;
            tableNumber: string;
            tableTitle: string;
            tableData: Array<{
                ward: number;
                owned: number;
                rented: number;
                institutional: number;
                other: number;
                total: number;
            }>;
            total: {
                owned: number;
                rented: number;
                institutional: number;
                other: number;
                total: number;
            };
            percentage: {
                owned: number;
                rented: number;
                institutional: number;
                other: number;
            };
            source: string;
            chartTitle: string;
        };
        foundationDetails: {
            title: string;
            subtitle: string;
            tableNumber: string;
            tableTitle: string;
            tableData: Array<{
                ward: number;
                mudBonded: number;
                cementBonded: number;
                rcc: number;
                wooden: number;
                other: number;
                total: number;
            }>;
            total: {
                mudBonded: number;
                cementBonded: number;
                rcc: number;
                wooden: number;
                other: number;
                total: number;
            };
            percentage: {
                mudBonded: number;
                cementBonded: number;
                rcc: number;
                wooden: number;
                other: number;
            };
            source: string;
            chartTitle: string;
        };
        outerWallDetails: {
            title: string;
            subtitle: string;
            tableNumber: string;
            tableTitle: string;
            tableData: Array<{
                ward: number;
                mudBonded: number;
                cementBonded: number;
                wood: number;
                bamboo: number;
                unbakedBrick: number;
                galvanized: number;
                other: number;
                total: number;
            }>;
            total: {
                mudBonded: number;
                cementBonded: number;
                wood: number;
                bamboo: number;
                unbakedBrick: number;
                galvanized: number;
                other: number;
                total: number;
            };
            percentage: {
                mudBonded: number;
                cementBonded: number;
                wood: number;
                bamboo: number;
                unbakedBrick: number;
                galvanized: number;
                other: number;
            };
            source: string;
            chartTitle: string;
        };
        floorDetails: {
            title: string;
            subtitle: string;
            intro: string;
            tableNumber: string;
            tableTitle: string;
            tableData: Array<{
                ward: number;
                mud: number;
                woodBamboo: number;
                brickStone: number;
                tile: number;
                cement: number;
                other: number;
                total: number;
            }>;
            total: {
                mud: number;
                woodBamboo: number;
                brickStone: number;
                tile: number;
                cement: number;
                other: number;
                total: number;
            };
            percentage: {
                mud: number;
                woodBamboo: number;
                brickStone: number;
                tile: number;
                cement: number;
                other: number;
            };
            source: string;
            chartTitle: string;
        };
        roofDetails: {
            title: string;
            subtitle: string;
            intro: string;
            tableNumber: string;
            tableTitle: string;
            tableData: Array<{
                ward: number;
                zinc: number;
                cement: number;
                straw: number;
                tile: number;
                stone: number;
                wood: number;
                other: number;
                total: number;
            }>;
            total: {
                zinc: number;
                cement: number;
                straw: number;
                tile: number;
                stone: number;
                wood: number;
                other: number;
                total: number;
            };
            percentage: {
                zinc: number;
                cement: number;
                straw: number;
                tile: number;
                stone: number;
                wood: number;
                other: number;
            };
            source: string;
            chartTitle: string;
        };
    };
};

const content = await loadChapterSection<HousingStructureContent>(
    4,
    "housing-structure",
    lang,
);

if (!content) {
    throw new Error("Housing structure content not found");
}

// Ownership Chart Data
const ownershipChartLabels = [
    lang === "ne" ? "निजी" : "Private",
    lang === "ne" ? "भाडामा" : "Rented",
    lang === "ne" ? "संस्थागत" : "Institutional",
    lang === "ne" ? "अन्य" : "Other",
];
const ownershipChartData = [
    content.subsections.ownershipDetails.total.owned,
    content.subsections.ownershipDetails.total.rented,
    content.subsections.ownershipDetails.total.institutional,
    content.subsections.ownershipDetails.total.other,
];

// Foundation Chart Data
const foundationChartLabels = [
    lang === "ne" ? "माटोको जोडाइ" : "Mud Bonded",
    lang === "ne" ? "सिमेन्टको जोडाइ" : "Cement Bonded",
    lang === "ne" ? "ढलान पिल्लर" : "RCC Pillar",
    lang === "ne" ? "काठको खम्बा" : "Wooden Pillar",
    lang === "ne" ? "अन्य" : "Other",
];
const foundationChartData = [
    content.subsections.foundationDetails.total.mudBonded,
    content.subsections.foundationDetails.total.cementBonded,
    content.subsections.foundationDetails.total.rcc,
    content.subsections.foundationDetails.total.wooden,
    content.subsections.foundationDetails.total.other,
];

// Outer Wall Chart Data
const outerWallChartLabels = [
    lang === "ne" ? "माटो–ईट्टा" : "Mud-Brick",
    lang === "ne" ? "सिमेन्ट–ईँट्टा" : "Cement-Brick",
    lang === "ne" ? "काठ" : "Wood",
    lang === "ne" ? "बाँस" : "Bamboo",
    lang === "ne" ? "काँचो ईँट्टा" : "Unbaked Brick",
    lang === "ne" ? "जस्तापाता" : "Galvanized",
    lang === "ne" ? "अन्य" : "Other",
];
const outerWallChartData = [
    content.subsections.outerWallDetails.total.mudBonded,
    content.subsections.outerWallDetails.total.cementBonded,
    content.subsections.outerWallDetails.total.wood,
    content.subsections.outerWallDetails.total.bamboo,
    content.subsections.outerWallDetails.total.unbakedBrick,
    content.subsections.outerWallDetails.total.galvanized,
    content.subsections.outerWallDetails.total.other,
];

// Floor Chart Data
const floorChartLabels = [
    lang === "ne" ? "माटो" : "Mud",
    lang === "ne" ? "काठ/बाँस" : "Wood/Bamboo",
    lang === "ne" ? "इँटा/ढुङ्गा" : "Brick/Stone",
    lang === "ne" ? "टायल" : "Tile",
    lang === "ne" ? "सिमेन्ट" : "Cement",
    lang === "ne" ? "अन्य" : "Other",
];
const floorChartData = [
    content.subsections.floorDetails.total.mud,
    content.subsections.floorDetails.total.woodBamboo,
    content.subsections.floorDetails.total.brickStone,
    content.subsections.floorDetails.total.tile,
    content.subsections.floorDetails.total.cement,
    content.subsections.floorDetails.total.other,
];

// Roof Chart Data
const roofChartLabels = [
    lang === "ne" ? "जस्ता/टिन" : "Zinc/Tin",
    lang === "ne" ? "सिमेन्ट" : "Cement",
    lang === "ne" ? "फूस" : "Straw",
    lang === "ne" ? "टायल/खपडा" : "Tile/Khapada",
    lang === "ne" ? "ढुङ्गा" : "Stone",
    lang === "ne" ? "काठ" : "Wood",
    lang === "ne" ? "अन्य" : "Other",
];
const roofChartData = [
    content.subsections.roofDetails.total.zinc,
    content.subsections.roofDetails.total.cement,
    content.subsections.roofDetails.total.straw,
    content.subsections.roofDetails.total.tile,
    content.subsections.roofDetails.total.stone,
    content.subsections.roofDetails.total.wood,
    content.subsections.roofDetails.total.other,
];
---

<section id="housing-structure" class="relative bg-[#050505] py-8 md:py-12">
    <div class="container mx-auto px-8">
        <div class="w-full">
            <!-- Section Header -->
            <div class="mb-6">
                <h2
                    class="font-serif text-3xl md:text-4xl font-medium text-zinc-100 mb-6"
                >
                    {formatNumber(content.number, lang)}
                    {content.title}
                </h2>
            </div>

            <!-- Subsection: Ownership Details -->
            <div class="mb-12">
                <h3
                    class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-4"
                >
                    {content.subsections.ownershipDetails.subtitle}
                </h3>

                <!-- Introduction -->
                <p
                    class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-10"
                >
                    {content.intro}
                </p>

                <!-- Table Title -->
                <h4
                    class="font-serif text-xl md:text-2xl text-zinc-100 font-medium mb-4"
                >
                    {
                        formatNumber(
                            content.subsections.ownershipDetails.tableNumber,
                            lang,
                        )
                    }: {content.subsections.ownershipDetails.tableTitle}
                </h4>

                <!-- Ownership Table -->
                <div class="overflow-x-auto mb-6">
                    <table
                        class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10"
                    >
                        <thead>
                            <tr
                                class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20"
                            >
                                <th
                                    class="px-4 py-3 text-left font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "वडा नं." : "Ward No."
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "निजी" : "Private"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "भाडामा" : "Rented"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "संस्थागत"
                                            : "Institutional"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "अन्य" : "Other"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium"
                                    >{lang === "ne" ? "जम्मा" : "Total"}</th
                                >
                            </tr>
                        </thead>
                        <tbody>
                            {
                                content.subsections.ownershipDetails.tableData.map(
                                    (row: any) => (
                                        <tr class="border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                                            <td class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/5">
                                                {formatNumber(row.ward, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.owned, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.rented, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(
                                                    row.institutional,
                                                    lang,
                                                )}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.other, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right">
                                                {formatNumber(row.total, lang)}
                                            </td>
                                        </tr>
                                    ),
                                )
                            }
                            <!-- Total Row -->
                            <tr
                                class="bg-[#f2e25d]/10 border-t-2 border-[#f2e25d]/30 font-medium"
                            >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "जम्मा" : "Total"}</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                >
                                    {
                                        formatNumber(
                                            content.subsections.ownershipDetails
                                                .total.owned,
                                            lang,
                                        )
                                    }
                                </td>
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                >
                                    {
                                        formatNumber(
                                            content.subsections.ownershipDetails
                                                .total.rented,
                                            lang,
                                        )
                                    }
                                </td>
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                >
                                    {
                                        formatNumber(
                                            content.subsections.ownershipDetails
                                                .total.institutional,
                                            lang,
                                        )
                                    }
                                </td>
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                >
                                    {
                                        formatNumber(
                                            content.subsections.ownershipDetails
                                                .total.other,
                                            lang,
                                        )
                                    }
                                </td>
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right font-bold"
                                >
                                    {
                                        formatNumber(
                                            content.subsections.ownershipDetails
                                                .total.total,
                                            lang,
                                        )
                                    }
                                </td>
                            </tr>
                            <tr
                                class="bg-[#f2e25d]/5 border-t border-[#f2e25d]/20 font-medium"
                            >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "प्रतिशत" : "Percentage"
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.ownershipDetails
                                                .percentage.owned,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.ownershipDetails
                                                .percentage.rented,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.ownershipDetails
                                                .percentage.institutional,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.ownershipDetails
                                                .percentage.other,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right"
                                    >{formatNumber(100, lang)}%</td
                                >
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Source 1 -->
                <p class="text-zinc-400 font-serif text-sm italic mb-8">
                    {lang === "ne" ? "स्रोत" : "Source"}: {
                        content.subsections.ownershipDetails.source
                    }
                </p>

                <div class="bg-[#0a0a0a]/50 p-6 rounded-lg">
                    <D3BarChart
                        id="housing-ownership-chart"
                        title={content.subsections.ownershipDetails.chartTitle}
                        labels={ownershipChartLabels}
                        data={ownershipChartData}
                        lang={lang}
                    />
                </div>
            </div>

            <!-- Subsection: Foundation Details -->
            <div class="mb-12">
                <h3
                    class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-4"
                >
                    {content.subsections.foundationDetails.subtitle}
                </h3>

                <h4
                    class="font-serif text-xl md:text-2xl text-zinc-100 font-medium mb-4"
                >
                    {
                        formatNumber(
                            content.subsections.foundationDetails.tableNumber,
                            lang,
                        )
                    }: {content.subsections.foundationDetails.tableTitle}
                </h4>

                <!-- Foundation Table -->
                <div class="overflow-x-auto mb-6">
                    <table
                        class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10"
                    >
                        <thead>
                            <tr
                                class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20"
                            >
                                <th
                                    class="px-4 py-3 text-left font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "वडा नं." : "Ward No."
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "माटोको जोडाइ"
                                            : "Mud Bonded"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "सिमेन्टको जोडाइ"
                                            : "Cement Bonded"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "ढलान पिल्लर"
                                            : "RCC Pillar"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "काठको खम्बा"
                                            : "Wooden Pillar"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "अन्य" : "Other"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium"
                                    >{lang === "ne" ? "जम्मा" : "Total"}</th
                                >
                            </tr>
                        </thead>
                        <tbody>
                            {
                                content.subsections.foundationDetails.tableData.map(
                                    (row: any) => (
                                        <tr class="border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                                            <td class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/5">
                                                {formatNumber(row.ward, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(
                                                    row.mudBonded,
                                                    lang,
                                                )}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(
                                                    row.cementBonded,
                                                    lang,
                                                )}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.rcc, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.wooden, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.other, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right">
                                                {formatNumber(row.total, lang)}
                                            </td>
                                        </tr>
                                    ),
                                )
                            }
                            <tr
                                class="bg-[#f2e25d]/10 border-t-2 border-[#f2e25d]/30 font-medium"
                            >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "जम्मा" : "Total"}</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.total
                                                .mudBonded,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.total
                                                .cementBonded,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.total.rcc,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.total.wooden,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.total.other,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right font-bold"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.total.total,
                                            lang,
                                        )
                                    }</td
                                >
                            </tr>
                            <tr
                                class="bg-[#f2e25d]/5 border-t border-[#f2e25d]/20 font-medium"
                            >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "प्रतिशत" : "Percentage"
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.percentage
                                                .mudBonded,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.percentage
                                                .cementBonded,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.percentage
                                                .rcc,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.percentage
                                                .wooden,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections
                                                .foundationDetails.percentage
                                                .other,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right"
                                    >{formatNumber(100, lang)}%</td
                                >
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Source 2 -->
                <p class="text-zinc-400 font-serif text-sm italic mb-8">
                    {lang === "ne" ? "स्रोत" : "Source"}: {
                        content.subsections.foundationDetails.source
                    }
                </p>

                <!-- Foundation Bar Chart -->
                <div class="bg-[#0a0a0a]/50 p-6 rounded-lg">
                    <D3BarChart
                        id="housing-foundation-chart"
                        title={content.subsections.foundationDetails.chartTitle}
                        labels={foundationChartLabels}
                        data={foundationChartData}
                        lang={lang}
                    />
                </div>
            </div>

            <!-- Subsection: Outer Wall Details -->
            <div class="mb-12">
                <h3
                    class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-4"
                >
                    {content.subsections.outerWallDetails.subtitle}
                </h3>

                <h4
                    class="font-serif text-xl md:text-2xl text-zinc-100 font-medium mb-4"
                >
                    {
                        formatNumber(
                            content.subsections.outerWallDetails.tableNumber,
                            lang,
                        )
                    }: {content.subsections.outerWallDetails.tableTitle}
                </h4>

                <!-- Outer Wall Table -->
                <div class="overflow-x-auto mb-6">
                    <table
                        class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10"
                    >
                        <thead>
                            <tr
                                class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20"
                            >
                                <th
                                    class="px-4 py-3 text-left font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "वडा नं." : "Ward No."
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "माटो–ईट्टा"
                                            : "Mud-Brick"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "सिमेन्ट–ईँट्टा"
                                            : "Cement-Brick"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "काठ" : "Wood"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "बाँस" : "Bamboo"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "काँचो ईँट्टा"
                                            : "Unbaked Brick"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "जस्तापाता"
                                            : "Galvanized"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "अन्य" : "Other"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium"
                                    >{lang === "ne" ? "जम्मा" : "Total"}</th
                                >
                            </tr>
                        </thead>
                        <tbody>
                            {
                                content.subsections.outerWallDetails.tableData.map(
                                    (row: any) => (
                                        <tr class="border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                                            <td class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/5">
                                                {formatNumber(row.ward, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(
                                                    row.mudBonded,
                                                    lang,
                                                )}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(
                                                    row.cementBonded,
                                                    lang,
                                                )}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.wood, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.bamboo, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(
                                                    row.unbakedBrick,
                                                    lang,
                                                )}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(
                                                    row.galvanized,
                                                    lang,
                                                )}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.other, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right">
                                                {formatNumber(row.total, lang)}
                                            </td>
                                        </tr>
                                    ),
                                )
                            }
                            <tr
                                class="bg-[#f2e25d]/10 border-t-2 border-[#f2e25d]/30 font-medium"
                            >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "जम्मा" : "Total"}</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .total.mudBonded,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .total.cementBonded,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .total.wood,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .total.bamboo,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .total.unbakedBrick,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .total.galvanized,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .total.other,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right font-bold"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .total.total,
                                            lang,
                                        )
                                    }</td
                                >
                            </tr>
                            <tr
                                class="bg-[#f2e25d]/5 border-t border-[#f2e25d]/20 font-medium"
                            >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "प्रतिशत" : "Percentage"
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .percentage.mudBonded,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .percentage.cementBonded,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .percentage.wood,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .percentage.bamboo,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .percentage.unbakedBrick,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .percentage.galvanized,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.outerWallDetails
                                                .percentage.other,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right"
                                    >{formatNumber(100, lang)}</td
                                >
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Source 3 -->
                <p class="text-zinc-400 font-serif text-sm italic mb-8">
                    {lang === "ne" ? "स्रोत" : "Source"}: {
                        content.subsections.outerWallDetails.source
                    }
                </p>

                <!-- Outer Wall Pie Chart -->
                <div class="bg-[#0a0a0a]/50 p-6 rounded-lg">
                    <D3PieChart
                        id="housing-outerwall-chart"
                        title={content.subsections.outerWallDetails.chartTitle}
                        labels={outerWallChartLabels}
                        data={outerWallChartData}
                        lang={lang}
                        height={400}
                    />
                </div>
            </div>

            <!-- Subsection: Floor Details -->
            <div class="mb-12">
                <h3
                    class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-4"
                >
                    {content.subsections.floorDetails.subtitle}
                </h3>

                <p
                    class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-10"
                >
                    {content.subsections.floorDetails.intro}
                </p>

                <h4
                    class="font-serif text-xl md:text-2xl text-zinc-100 font-medium mb-4"
                >
                    {
                        formatNumber(
                            content.subsections.floorDetails.tableNumber,
                            lang,
                        )
                    }: {content.subsections.floorDetails.tableTitle}
                </h4>

                <!-- Floor Table -->
                <div class="overflow-x-auto mb-6">
                    <table
                        class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10"
                    >
                        <thead>
                            <tr
                                class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20"
                            >
                                <th
                                    class="px-4 py-3 text-left font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "वडा नं." : "Ward No."
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "माटो" : "Mud"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "काठ/बाँस"
                                            : "Wood/Bamboo"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "इँटा/ढुङ्गा"
                                            : "Brick/Stone"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "टायल" : "Tile"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "सिमेन्ट" : "Cement"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "अन्य" : "Other"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium"
                                    >{lang === "ne" ? "जम्मा" : "Total"}</th
                                >
                            </tr>
                        </thead>
                        <tbody>
                            {
                                content.subsections.floorDetails.tableData.map(
                                    (row: any) => (
                                        <tr class="border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                                            <td class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/5">
                                                {formatNumber(row.ward, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.mud, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(
                                                    row.woodBamboo,
                                                    lang,
                                                )}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(
                                                    row.brickStone,
                                                    lang,
                                                )}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.tile, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.cement, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.other, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right">
                                                {formatNumber(row.total, lang)}
                                            </td>
                                        </tr>
                                    ),
                                )
                            }
                            <tr
                                class="bg-[#f2e25d]/10 border-t-2 border-[#f2e25d]/30 font-medium"
                            >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "जम्मा" : "Total"}</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .total.mud,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .total.woodBamboo,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .total.brickStone,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .total.tile,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .total.cement,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .total.other,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right font-bold"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .total.total,
                                            lang,
                                        )
                                    }</td
                                >
                            </tr>
                            <tr
                                class="bg-[#f2e25d]/5 border-t border-[#f2e25d]/20 font-medium"
                            >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "प्रतिशत" : "Percentage"
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .percentage.mud,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .percentage.woodBamboo,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .percentage.brickStone,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .percentage.tile,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .percentage.cement,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.floorDetails
                                                .percentage.other,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right"
                                    >{formatNumber(100, lang)}%</td
                                >
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Floor Pie Chart -->
                <div class="bg-[#0a0a0a]/50 p-6 rounded-lg">
                    <D3PieChart
                        id="housing-floor-chart"
                        title={content.subsections.floorDetails.chartTitle}
                        labels={floorChartLabels}
                        data={floorChartData}
                        lang={lang}
                        height={400}
                    />
                </div>
            </div>

            <!-- Subsection: Roof Details -->
            <div class="mb-12">
                <h3
                    class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-4"
                >
                    {content.subsections.roofDetails.subtitle}
                </h3>

                {
                    content.subsections.roofDetails.intro && (
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-10">
                            {content.subsections.roofDetails.intro}
                        </p>
                    )
                }

                <h4
                    class="font-serif text-xl md:text-2xl text-zinc-100 font-medium mb-4"
                >
                    {
                        formatNumber(
                            content.subsections.roofDetails.tableNumber,
                            lang,
                        )
                    }: {content.subsections.roofDetails.tableTitle}
                </h4>

                <!-- Roof Table -->
                <div class="overflow-x-auto mb-6">
                    <table
                        class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10"
                    >
                        <thead>
                            <tr
                                class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20"
                            >
                                <th
                                    class="px-4 py-3 text-left font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "वडा नं." : "Ward No."
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "जस्ता/टिन" : "Zinc/Tin"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "सिमेन्ट" : "Cement"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "फूस" : "Straw"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne"
                                            ? "टायल/खपडा"
                                            : "Tile/Khapada"
                                    }</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "ढुङ्गा" : "Stone"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "काठ" : "Wood"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "अन्य" : "Other"}</th
                                >
                                <th
                                    class="px-4 py-3 text-right font-serif text-zinc-100 font-medium"
                                    >{lang === "ne" ? "जम्मा" : "Total"}</th
                                >
                            </tr>
                        </thead>
                        <tbody>
                            {
                                content.subsections.roofDetails.tableData.map(
                                    (row: {
                                        ward: number;
                                        zinc: number;
                                        cement: number;
                                        straw: number;
                                        tile: number;
                                        stone: number;
                                        wood: number;
                                        other: number;
                                        total: number;
                                    }) => (
                                        <tr class="border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                                            <td class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/5">
                                                {formatNumber(row.ward, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.zinc, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.cement, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.straw, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.tile, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.stone, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.wood, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                                {formatNumber(row.other, lang)}
                                            </td>
                                            <td class="px-4 py-3 font-serif text-zinc-100 text-right">
                                                {formatNumber(row.total, lang)}
                                            </td>
                                        </tr>
                                    ),
                                )
                            }
                            <tr
                                class="bg-[#f2e25d]/10 border-t-2 border-[#f2e25d]/30 font-medium"
                            >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                                    >{lang === "ne" ? "जम्मा" : "Total"}</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .total.zinc,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .total.cement,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .total.straw,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .total.tile,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .total.stone,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .total.wood,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .total.other,
                                            lang,
                                        )
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right font-bold"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .total.total,
                                            lang,
                                        )
                                    }</td
                                >
                            </tr>
                            <tr
                                class="bg-[#f2e25d]/5 border-t border-[#f2e25d]/20 font-medium"
                            >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                                    >{
                                        lang === "ne" ? "प्रतिशत" : "Percentage"
                                    }</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .percentage.zinc,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .percentage.cement,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .percentage.straw,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .percentage.tile,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .percentage.stone,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .percentage.wood,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                                    >{
                                        formatNumber(
                                            content.subsections.roofDetails
                                                .percentage.other,
                                            lang,
                                        )
                                    }%</td
                                >
                                <td
                                    class="px-4 py-3 font-serif text-zinc-100 text-right"
                                    >{formatNumber(100, lang)}%</td
                                >
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Roof Pie Chart -->
                <div class="bg-[#0a0a0a]/50 p-6 rounded-lg">
                    <D3PieChart
                        id="housing-roof-chart"
                        title={content.subsections.roofDetails.chartTitle}
                        labels={roofChartLabels}
                        data={roofChartData}
                        lang={lang}
                        height={400}
                    />
                </div>
            </div>
        </div>
    </div>
</section>
