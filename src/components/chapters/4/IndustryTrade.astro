---
import type { Language } from "../../../lib/i18n";
import { loadChapterSection } from "../../../lib/i18n/chapter-loader";
import { formatNumber } from "../../../lib/i18n/formatters";

interface Props {
    lang: Language;
}

const { lang } = Astro.props;

type IndustryIntroSection = {
    title: string;
    number: string;
    content: string;
    tableTitle: string;
    source: string;
    tableData: Array<{
        sn: string;
        description: string;
        number: string;
    }>;
};

type IndustrialDevelopmentSection = {
    title: string;
    number: string;
    content1: string;
    content2: string;
};

type TradeBusinessSection = {
    title: string;
    number: string;
    content: string;
};

type MineralsMinesSection = {
    title: string;
    number: string;
    content1: string;
    content2: string;
};

type LocalMarketsSection = {
    title: string;
    number: string;
    content: string;
    tableTitle: string;
    tableNumber: string;
    source: string;
    tableData: Array<{
        sn: string;
        name: string;
        ward: string;
    }>;
};

type BankingFinanceSection = {
    title: string;
    number: string;
    content: string;
    tableTitle: string;
    tableNumber: string;
    source: string;
    tableData: Array<{
        sn: string;
        name: string;
        type: string;
    }>;
};

type CooperativesSection = {
    title: string;
    number: string;
    content: string;
    tableTitle: string;
    tableNumber: string;
    source: string;
    tableData: Array<{
        sn: string;
        name: string;
        type: string;
        address: string;
    }>;
};

const industryIntro = (await loadChapterSection(
    4,
    "industry-intro",
    lang,
)) as IndustryIntroSection;

const industrialDevelopment = (await loadChapterSection(
    4,
    "industrial-development",
    lang,
)) as IndustrialDevelopmentSection;

const tradeBusiness = (await loadChapterSection(
    4,
    "trade-business",
    lang,
)) as TradeBusinessSection;

const mineralsMines = (await loadChapterSection(
    4,
    "minerals-mines",
    lang,
)) as MineralsMinesSection;

const localMarkets = (await loadChapterSection(
    4,
    "local-markets",
    lang,
)) as LocalMarketsSection;

const bankingFinance = (await loadChapterSection(
    4,
    "banking-finance",
    lang,
)) as BankingFinanceSection;

const cooperatives = (await loadChapterSection(
    4,
    "cooperatives",
    lang,
)) as CooperativesSection;
---

<!-- 4.5 Industry, Trade and Banking -->
{
    industryIntro && (
        <section id="industry-intro" class="relative bg-[#050505] py-8 md:py-12 border-t border-[#f2e25d]/10">
            <div class="container mx-auto px-8">
                <div class="w-full mx-auto">
                    <div class="w-full">
                        <div class="mb-6">
                            <h2 class="font-serif text-3xl md:text-4xl font-medium text-zinc-100 mb-6">
                                {formatNumber(industryIntro.number, lang)} {industryIntro.title}
                            </h2>
                        </div>
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-10">
                            {industryIntro.content}
                        </p>
                    </div>

                    <!-- Table (Industry Summary) -->
                    <div class="mb-10 w-full mx-auto">
                        <h4 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium mb-4 text-center">
                            {industryIntro.tableTitle}
                        </h4>
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10 text-sm md:text-base">
                                <thead>
                                    <tr class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20">
                                        <th class="px-4 py-3 border-r border-[#f2e25d]/10 text-center w-16 font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "क्र.सं." : "SN"}
                                        </th>
                                        <th class="px-4 py-3 border-r border-[#f2e25d]/10 text-left font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "विवरण" : "Description"}
                                        </th>
                                        <th class="px-4 py-3 text-left font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "संख्या" : "Number"}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {industryIntro.tableData.map((row: any) => (
                                        <tr class="text-zinc-100 border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                                            <td class="px-4 py-3 border-r border-[#f2e25d]/5 text-center font-medium">
                                                {formatNumber(row.sn, lang)}
                                            </td>
                                            <td class="px-4 py-3 border-r border-[#f2e25d]/5">
                                                {row.description}
                                            </td>
                                            <td class="px-4 py-3">
                                                {formatNumber(row.number, lang)}
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                        <div class="text-right text-zinc-400 font-serif italic text-sm mt-2">
                            {lang === "ne" ? "स्रोत" : "Source"}: {industryIntro.source}
                        </div>
                    </div>
                </div>
            </div>
        </section>
    )
}

<!-- 4.5.1 Industrial Development -->
{
    industrialDevelopment && (
        <section id="industrial-development" class="relative bg-[#050505] pb-8 md:pb-12">
            <div class="container mx-auto px-8">
                <div class="w-full">
                    <div class="mb-6">
                        <h3 class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-6">
                            {formatNumber(industrialDevelopment.number, lang)} {industrialDevelopment.title}
                        </h3>
                    </div>
                    <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-6">
                        {industrialDevelopment.content1}
                    </p>
                    <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-10">
                        {industrialDevelopment.content2}
                    </p>
                </div>
            </div>
        </section>
    )
}

<!-- 4.5.2 Trade/Business -->
{
    tradeBusiness && (
        <section id="trade-business" class="relative bg-[#050505] pb-8 md:pb-12">
            <div class="container mx-auto px-8">
                <div class="w-full">
                    <div class="mb-6">
                        <h3 class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-6">
                            {formatNumber(tradeBusiness.number, lang)} {tradeBusiness.title}
                        </h3>
                    </div>
                    <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-10">
                        {tradeBusiness.content}
                    </p>
                </div>
            </div>
        </section>
    )
}

<!-- 4.5.3 Minerals -->
{
    mineralsMines && (
        <section id="minerals-mines" class="relative bg-[#050505] pb-8 md:pb-12">
            <div class="container mx-auto px-8">
                <div class="w-full">
                    <div class="mb-6">
                        <h3 class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-6">
                            {formatNumber(mineralsMines.number, lang)} {mineralsMines.title}
                        </h3>
                    </div>
                    <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-6">
                        {mineralsMines.content1}
                    </p>
                    <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-10">
                        {mineralsMines.content2}
                    </p>
                </div>
            </div>
        </section>
    )
}

<!-- 4.5.4 Local Markets -->
{
    localMarkets && (
        <section id="local-markets" class="relative bg-[#050505] pb-8 md:pb-12">
            <div class="container mx-auto px-8">
                <div class="w-full mx-auto">
                    <div class="w-full">
                        <div class="mb-6">
                            <h3 class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-6">
                                {formatNumber(localMarkets.number, lang)} {localMarkets.title}
                            </h3>
                        </div>
                        
                        <!-- 2 Image Containers -->
                        <div class="mb-6">
                             <div class="w-full h-80 bg-zinc-800 rounded flex items-center justify-center text-zinc-500 mb-4">
                                [Image: Local Market 1]
                            </div>
                             <div class="w-full h-80 bg-zinc-800 rounded flex items-center justify-center text-zinc-500 mb-4">
                                [Image: Local Market 2]
                            </div>
                        </div>

                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-10">
                            {localMarkets.content}
                        </p>

                        <!-- Another Image Container -->
                        <div class="mb-10">
                             <div class="w-full h-80 bg-zinc-800 rounded flex items-center justify-center text-zinc-500 mb-4">
                                [Image: Local Market 3]
                            </div>
                        </div>
                    </div>

                    <!-- Table 37 Markets -->
                    <div class="mb-10 w-full mx-auto">
                        <h4 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium mb-4 text-center">
                            {formatNumber(localMarkets.tableNumber, lang)}: {localMarkets.tableTitle}
                        </h4>
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10 text-sm md:text-base">
                                <thead>
                                    <tr class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20">
                                        <th class="px-4 py-3 border-r border-[#f2e25d]/10 text-center w-20 font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "क्र.सं." : "SN"}
                                        </th>
                                        <th class="px-4 py-3 border-r border-[#f2e25d]/10 text-left font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "नाम" : "Name"}
                                        </th>
                                        <th class="px-4 py-3 text-left font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "वडा नं." : "Ward No."}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {localMarkets.tableData.map((row: any) => (
                                        <tr class="text-zinc-100 border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                                            <td class="px-4 py-3 border-r border-[#f2e25d]/5 text-center font-medium">
                                                {formatNumber(row.sn, lang)}
                                            </td>
                                            <td class="px-4 py-3 border-r border-[#f2e25d]/5">
                                                {row.name}
                                            </td>
                                            <td class="px-4 py-3">
                                                {formatNumber(row.ward, lang)}
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                        <div class="text-right text-zinc-400 font-serif italic text-sm mt-2">
                            {lang === "ne" ? "स्रोत" : "Source"}: {localMarkets.source}
                        </div>
                    </div>
                </div>
            </div>
        </section>
    )
}

<!-- 4.5.5 Banking -->
{
    bankingFinance && (
        <section id="banking-finance" class="relative bg-[#050505] pb-8 md:pb-12">
            <div class="container mx-auto px-8">
                <div class="w-full mx-auto">
                    <div class="w-full">
                        <div class="mb-6">
                            <h3 class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-6">
                                {formatNumber(bankingFinance.number, lang)} {bankingFinance.title}
                            </h3>
                        </div>
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-10">
                            {bankingFinance.content}
                        </p>
                    </div>

                    <!-- Table 38 Banking -->
                    <div class="mb-10 w-full mx-auto">
                        <h4 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium mb-4 text-center">
                            {formatNumber(bankingFinance.tableNumber, lang)}: {bankingFinance.tableTitle}
                        </h4>
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10 text-sm md:text-base">
                                <thead>
                                    <tr class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20">
                                        <th class="px-4 py-3 border-r border-[#f2e25d]/10 text-center w-16 font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "क्र.सं." : "SN"}
                                        </th>
                                        <th class="px-4 py-3 border-r border-[#f2e25d]/10 text-left font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "बैङ्क तथा वित्तीय संस्थाको नाम" : "Name of Bank/Financial Institution"}
                                        </th>
                                        <th class="px-4 py-3 text-left font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "प्रकार" : "Type"}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {bankingFinance.tableData.map((row: any) => (
                                        <tr class="text-zinc-100 border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                                            <td class="px-4 py-3 border-r border-[#f2e25d]/5 text-center font-medium">
                                                {formatNumber(row.sn, lang)}
                                            </td>
                                            <td class="px-4 py-3 border-r border-[#f2e25d]/5">
                                                {row.name}
                                            </td>
                                            <td class="px-4 py-3">
                                                {row.type}
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                        <div class="text-right text-zinc-400 font-serif italic text-sm mt-2">
                            {lang === "ne" ? "स्रोत" : "Source"}: {bankingFinance.source}
                        </div>
                    </div>
                </div>
            </div>
        </section>
    )
}

<!-- 4.5.6 Cooperatives -->
{
    cooperatives && (
        <section id="cooperatives" class="relative bg-[#050505] pb-8 md:pb-12">
            <div class="container mx-auto px-8">
                <div class="w-full mx-auto">
                    <div class="w-full">
                        <div class="mb-6">
                            <h3 class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-6">
                                {formatNumber(cooperatives.number, lang)} {cooperatives.title}
                            </h3>
                        </div>
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed mb-10">
                            {cooperatives.content}
                        </p>
                    </div>

                    <!-- Table 39 Cooperatives -->
                    <div class="mb-10 w-full mx-auto">
                        <h4 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium mb-4 text-center">
                            {formatNumber(cooperatives.tableNumber, lang)}: {cooperatives.tableTitle}
                        </h4>
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10 text-sm md:text-base">
                                <thead>
                                    <tr class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20">
                                        <th class="px-4 py-3 border-r border-[#f2e25d]/10 text-center w-16 font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "क्र.सं." : "SN"}
                                        </th>
                                        <th class="px-4 py-3 border-r border-[#f2e25d]/10 text-left font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "सहकारी संस्थाहरूको नाम" : "Name of Cooperative Institutions"}
                                        </th>
                                        <th class="px-4 py-3 border-r border-[#f2e25d]/10 text-left font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "प्रकार" : "Type"}
                                        </th>
                                        <th class="px-4 py-3 text-left font-serif text-zinc-100 font-medium">
                                            {lang === "ne" ? "ठेगाना" : "Address"}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {cooperatives.tableData.map((row: any) => (
                                        <tr class="text-zinc-100 border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                                            <td class="px-4 py-3 border-r border-[#f2e25d]/5 text-center font-medium">
                                                {formatNumber(row.sn, lang)}
                                            </td>
                                            <td class="px-4 py-3 border-r border-[#f2e25d]/5">
                                                {row.name}
                                            </td>
                                            <td class="px-4 py-3 border-r border-[#f2e25d]/5">
                                                {row.type}
                                            </td>
                                            <td class="px-4 py-3">
                                                {row.address}
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                        <div class="text-right text-zinc-400 font-serif italic text-sm mt-2">
                            {lang === "ne" ? "स्रोत" : "Source"}: {cooperatives.source}
                        </div>
                    </div>
                </div>
            </div>
        </section>
    )
}
