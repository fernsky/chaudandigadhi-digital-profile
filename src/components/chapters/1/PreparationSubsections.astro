---
import type { Language } from "../../../lib/i18n";
import { formatNumber } from "../../../lib/i18n/formatters";
import { loadChapterSections } from "../../../lib/i18n/chapter-loader";

interface Props {
    lang: Language;
}

const { lang } = Astro.props;

// Load all subsection content
const subsections = await loadChapterSections(
    1,
    [
        "template-preparation",
        "preparation-workshop",
        "data-collection",
        "data-analysis",
        "draft-preparation",
        "feedback-collection",
        "final-report",
    ],
    lang,
);
---

<div class="bg-[#050505]">
    <div class="container mx-auto px-8">
        <div class="w-full space-y-8">
            <!-- 1.4.1 Template Preparation -->
            {
                subsections["template-preparation"] && (
                    <div id="template-preparation" class="space-y-4">
                        <h3 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium">
                            {formatNumber("1.4.1", lang)}{" "}
                            {subsections["template-preparation"].title}
                        </h3>
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed">
                            {subsections["template-preparation"].intro}
                        </p>
                        <div class="space-y-4">
                            {subsections["template-preparation"].activities.map(
                                (activity: any) => (
                                    <div class="flex items-start gap-4">
                                        <span class="text-zinc-100 font-serif text-lg md:text-xl shrink-0">
                                            â€¢
                                        </span>
                                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed">
                                            {activity.text}
                                        </p>
                                    </div>
                                ),
                            )}
                        </div>
                    </div>
                )
            }

            <!-- 1.4.2 Preparation Workshop -->
            {
                subsections["preparation-workshop"] && (
                    <div id="preparation-workshop" class="space-y-4">
                        <h3 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium">
                            {formatNumber("1.4.2", lang)}{" "}
                            {subsections["preparation-workshop"].title}
                        </h3>
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed">
                            {subsections["preparation-workshop"].description}
                        </p>
                    </div>
                )
            }

            <!-- 1.4.3 Data Collection -->
            {
                subsections["data-collection"] && (
                    <div id="data-collection" class="space-y-4">
                        <h3 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium">
                            {formatNumber("1.4.3", lang)}{" "}
                            {subsections["data-collection"].title}
                        </h3>
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed">
                            {subsections["data-collection"].intro}{" "}
                            {subsections["data-collection"].mainContent}
                        </p>
                    </div>
                )
            }

            <!-- 1.4.4 Data Analysis -->
            {
                subsections["data-analysis"] && (
                    <div id="data-analysis" class="space-y-4">
                        <h3 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium">
                            {formatNumber("1.4.4", lang)}{" "}
                            {subsections["data-analysis"].title}
                        </h3>
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed">
                            {subsections["data-analysis"].description}{" "}
                            {subsections["data-analysis"].mappingDescription}
                        </p>
                    </div>
                )
            }

            <!-- 1.4.5 Draft Preparation -->
            {
                subsections["draft-preparation"] && (
                    <div id="draft-preparation" class="space-y-4">
                        <h3 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium">
                            {formatNumber("1.4.5", lang)}{" "}
                            {subsections["draft-preparation"].title}
                        </h3>
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed">
                            {subsections["draft-preparation"].description}
                        </p>
                    </div>
                )
            }

            <!-- 1.4.6 Feedback Collection -->
            {
                subsections["feedback-collection"] && (
                    <div id="feedback-collection" class="space-y-4">
                        <h3 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium">
                            {formatNumber("1.4.6", lang)}{" "}
                            {subsections["feedback-collection"].title}
                        </h3>
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed">
                            {subsections["feedback-collection"].intro}
                        </p>
                    </div>
                )
            }

            <!-- 1.4.7 Final Report -->
            {
                subsections["final-report"] && (
                    <div id="final-report" class="space-y-4">
                        <h3 class="font-serif text-xl md:text-2xl text-zinc-100 font-medium">
                            {formatNumber("1.4.7", lang)}{" "}
                            {subsections["final-report"].title}
                        </h3>
                        <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed">
                            {subsections["final-report"].description}
                        </p>
                    </div>
                )
            }
        </div>
    </div>
</div>
