---
import type { Language } from "../../../lib/i18n";
import { loadChapterSection } from "../../../lib/i18n/chapter-loader";

interface Props {
    lang: Language;
}

const { lang } = Astro.props;

type MainSettlementsContent = {
    title: string;
    sectionId: string;
    subsections: {
        mainSettlements: {
            title: string;
            number: string;
            intro: string[];
            tableTitle: string;
            tableData: Array<{
                wardNo: string;
                settlements: string;
            }>;
            source: string;
        };
    };
};

const content = await loadChapterSection<MainSettlementsContent>(
    3,
    "main-settlements",
    lang,
);

if (!content) {
    throw new Error("Main settlements content not found");
}

const { mainSettlements } = content.subsections;
---

<section id="main-settlements" class="relative bg-[#050505] py-8 md:py-12">
    <div class="container mx-auto px-8">
        <div class="w-full">
            <!-- Section Header -->
            <div class="mb-6">
                <h2
                    class="font-serif text-3xl md:text-4xl font-medium text-zinc-100 mb-6"
                >
                    ३.१ {content.title}
                </h2>
            </div>

            <!-- Subsection: Main Settlements -->
            <div class="mb-8">
                <h3
                    class="font-serif text-2xl md:text-3xl font-medium text-zinc-100 mb-4"
                >
                    {mainSettlements.number}
                    {mainSettlements.title}
                </h3>

                <!-- Intro Paragraphs -->
                <div class="space-y-4 mb-6">
                    {
                        mainSettlements.intro.map((para) => (
                            <p class="text-zinc-100 font-serif text-lg md:text-xl font-light leading-relaxed">
                                {para}
                            </p>
                        ))
                    }
                </div>

                <!-- Table Title -->
                <h4
                    class="font-serif text-xl md:text-2xl text-zinc-100 font-medium mb-4"
                >
                    {mainSettlements.tableTitle}
                </h4>

                <!-- Premium Table -->
                <div class="overflow-x-auto mb-4">
                    <table
                        class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10"
                    >
                        <thead>
                            <tr
                                class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20"
                            >
                                <th
                                    class="px-4 py-3 text-left font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10 w-24"
                                    >वडा नं.</th
                                >
                                <th
                                    class="px-4 py-3 text-left font-serif text-zinc-100 font-medium"
                                    >नगरपालिकाका मुख्य बस्तीहरुको विवरण</th
                                >
                            </tr>
                        </thead>
                        <tbody>
                            {
                                mainSettlements.tableData.map((row) => (
                                    <tr class="border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                                        <td class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/5 font-medium">
                                            {row.wardNo}
                                        </td>
                                        <td class="px-4 py-3 font-serif text-zinc-100">
                                            {row.settlements}
                                        </td>
                                    </tr>
                                ))
                            }
                        </tbody>
                    </table>
                </div>

                <!-- Source -->
                <p class="text-zinc-400 font-serif text-sm italic">
                    स्रोतM {mainSettlements.source}
                </p>
            </div>
        </div>
    </div>
</section>
