---
import type { Language } from "../../../lib/i18n";
import D3PieChart from "../D3PieChart.astro";

interface Props {
    lang: Language;
    data?: {
        label: string;
        value: number;
        color: string;
    }[];
}

const { lang, data } = Astro.props;

// Default data if not provided (fallback)
const literacyData = data || [
    { label: "साक्षर", value: 77.7, color: "#f2e25d" },
    { label: "पढ्न मात्र जान्ने", value: 0.24, color: "#a3a3a3" },
    { label: "निरक्षर", value: 22.06, color: "#525252" },
];

const total = literacyData.reduce((sum, item) => sum + item.value, 0);
---

<div class="space-y-6">
    <D3PieChart
        id="literacy-chart"
        title="साक्षरता दर विवरण"
        labels={literacyData.map((d) => d.label)}
        data={literacyData.map((d) => d.value)}
        lang={lang}
        height={350}
        colors={literacyData.map((d) => d.color)}
    />
</div>
