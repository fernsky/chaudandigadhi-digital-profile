---
import type { Language } from "../../../lib/i18n";

interface Props {
    lang: Language;
}

const { lang } = Astro.props;

// Population pyramid data (sample age groups)
const ageGroups = [
    { age: "0-4", male: 2500, female: 2400 },
    { age: "5-9", male: 2800, female: 2700 },
    { age: "10-14", male: 3200, female: 3100 },
    { age: "15-19", male: 3500, female: 3400 },
    { age: "20-24", male: 3800, female: 3900 },
    { age: "25-29", male: 3600, female: 3700 },
    { age: "30-34", male: 3200, female: 3300 },
    { age: "35-39", male: 2800, female: 2900 },
    { age: "40-44", male: 2400, female: 2500 },
    { age: "45-49", male: 2000, female: 2100 },
    { age: "50-54", male: 1600, female: 1700 },
    { age: "55-59", male: 1200, female: 1300 },
    { age: "60-64", male: 900, female: 1000 },
    { age: "65+", male: 800, female: 900 },
];

const maxValue = Math.max(...ageGroups.flatMap(g => [g.male, g.female]));
---

<div class="bg-[#0a0a0a] border border-[#f2e25d]/10 p-6 md:p-8">
    <h4 class="font-serif text-xl text-zinc-100 font-medium mb-6 text-center">
        जनसंख्या पिरामिड
    </h4>
    
    <div class="space-y-1">
        {
            ageGroups.reverse().map((group) => (
                <div class="flex items-center gap-2">
                    <!-- Male (Left) -->
                    <div class="flex-1 flex justify-end">
                        <div class="flex items-center gap-2 w-full">
                            <span class="text-zinc-400 font-serif text-xs w-16 text-right">
                                {group.male.toLocaleString()}
                            </span>
                            <div class="flex-1 bg-[#050505] h-6 relative border border-[#f2e25d]/10">
                                <div
                                    class="absolute inset-y-0 right-0 bg-blue-500 transition-all duration-500"
                                    style={`width: ${(group.male / maxValue) * 100}%`}
                                />
                            </div>
                        </div>
                    </div>

                    <!-- Age Label (Center) -->
                    <div class="w-16 text-center">
                        <span class="text-zinc-100 font-serif text-xs font-medium">{group.age}</span>
                    </div>

                    <!-- Female (Right) -->
                    <div class="flex-1">
                        <div class="flex items-center gap-2 w-full">
                            <div class="flex-1 bg-[#050505] h-6 relative border border-[#f2e25d]/10">
                                <div
                                    class="absolute inset-y-0 left-0 bg-pink-500 transition-all duration-500"
                                    style={`width: ${(group.female / maxValue) * 100}%`}
                                />
                            </div>
                            <span class="text-zinc-400 font-serif text-xs w-16">
                                {group.female.toLocaleString()}
                            </span>
                        </div>
                    </div>
                </div>
            ))
        }
    </div>

    <!-- Legend -->
    <div class="flex justify-center gap-8 mt-6 pt-6 border-t border-[#f2e25d]/10">
        <div class="flex items-center gap-2">
            <div class="w-4 h-4 bg-blue-500"></div>
            <span class="text-zinc-100 font-serif text-sm">पुरुष</span>
        </div>
        <div class="flex items-center gap-2">
            <div class="w-4 h-4 bg-pink-500"></div>
            <span class="text-zinc-100 font-serif text-sm">महिला</span>
        </div>
    </div>
</div>
