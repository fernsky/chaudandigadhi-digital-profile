---
import type { Language } from "../../../lib/i18n";
import { loadChapterSection } from "../../../lib/i18n/chapter-loader";

interface Props {
    lang: Language;
}

const { lang } = Astro.props;

const content = await loadChapterSection<any>(2, "terrain-aspect", lang);

if (!content) {
    throw new Error("Aspect data not found");
}

const data = content.tableData;
---

<div class="space-y-6">
    <h4
        class="font-serif text-xl md:text-2xl text-[#ea1d24] font-medium text-center font-bold"
    >
        {content.tableTitle}
    </h4>

    <!-- Data Table -->
    <div class="overflow-x-auto">
        <table
            class="w-full border-collapse bg-[#0a0a0a] border border-[#f2e25d]/10"
        >
            <thead>
                <tr class="bg-[#f2e25d]/5 border-b border-[#f2e25d]/20">
                    <th
                        class="px-4 py-3 text-left font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                        >जमिनको मोहडा</th
                    >
                    <th
                        class="px-4 py-3 text-right font-serif text-zinc-100 font-medium border-r border-[#f2e25d]/10"
                        >क्षेत्रफल (वर्ग कि.मि.)</th
                    >
                    <th
                        class="px-4 py-3 text-right font-serif text-zinc-100 font-medium"
                        >क्षेत्रफल प्रतिशतमा</th
                    >
                </tr>
            </thead>
            <tbody>
                {
                    data.map((row: any) => (
                        <tr class="border-b border-[#f2e25d]/5 hover:bg-[#f2e25d]/5 transition-colors duration-200">
                            <td class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/5">
                                {row.aspect}
                            </td>
                            <td class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/5">
                                {row.area.toFixed(2)}
                            </td>
                            <td class="px-4 py-3 font-serif text-zinc-100 text-right">
                                {row.percentage.toFixed(2)}
                            </td>
                        </tr>
                    ))
                }
                <tr
                    class="bg-[#f2e25d]/10 border-t-2 border-[#f2e25d]/30 font-medium"
                >
                    <td
                        class="px-4 py-3 font-serif text-zinc-100 border-r border-[#f2e25d]/10"
                        >जम्मा</td
                    >
                    <td
                        class="px-4 py-3 font-serif text-zinc-100 text-right border-r border-[#f2e25d]/10"
                    >
                        {content.total.area.toFixed(2)}
                    </td>
                    <td class="px-4 py-3 font-serif text-zinc-100 text-right">
                        {content.total.percentage}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <p class="text-zinc-400 font-serif text-sm italic text-center">
        स्रोत: {content.source}
    </p>
</div>
