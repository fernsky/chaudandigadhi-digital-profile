---
import type { Language } from "../../../lib/i18n";
import { loadChapterSection } from "../../../lib/i18n/chapter-loader";
import D3PieChart from "../D3PieChart.astro";

interface Props {
    lang: Language;
}

const { lang } = Astro.props;

type ReligionData = {
    tableData: Array<{
        religion: string;
        male: number;
        female: number;
        total: number;
        percentage: number;
    }>;
};

const content = await loadChapterSection<ReligionData>(3, "religion", lang);

if (!content) {
    throw new Error("Religion data not found");
}

const data = content.tableData;
---

<D3PieChart
    id="religion-chart"
    title=""
    labels={data.map((d) => d.religion)}
    data={data.map((d) => d.total)}
    lang={lang}
    height={400}
/>
