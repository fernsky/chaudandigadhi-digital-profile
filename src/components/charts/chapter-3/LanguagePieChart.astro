---
import type { Language } from "../../../lib/i18n";
import { loadChapterSection } from "../../../lib/i18n/chapter-loader";
import D3PieChart from "../D3PieChart.astro";

interface Props {
    lang: Language;
}

const { lang } = Astro.props;

type MotherTongueData = {
    tableData: Array<{
        language: string;
        male: number;
        female: number;
        total: number;
        percentage: number;
    }>;
};

const content = await loadChapterSection<MotherTongueData>(
    3,
    "mother-tongue",
    lang,
);

if (!content) {
    throw new Error("Mother tongue data not found");
}

const data = content.tableData;
---

<D3PieChart
    id="language-chart"
    title=""
    labels={data.map((d) => d.language)}
    data={data.map((d) => d.total)}
    lang={lang}
    height={400}
/>
